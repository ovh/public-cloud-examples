FROM python:3.13-slim

# ğŸ“‚ Working directory in the container ğŸ“‚
WORKDIR /workspace

# ğŸ Copy files in /workspace ğŸ
COPY . /workspace

# â¬‡ï¸ Install any needed packages specified in requirements.txt â¬‡ï¸
RUN pip install --no-cache-dir -r requirements.txt

# ğŸ” Change ownership of the workspace directory to the user with UID 42420 (OVHcloud user) ğŸ”
RUN chown -R 42420:42420 /workspace

# âš™ï¸ Make port 7860 available âš™ï¸
EXPOSE 7860

# âš™ï¸ Gradio configuration to run on localhost âš™ï¸
ENV GRADIO_SERVER_NAME="0.0.0.0"

# ğŸ” Define default value for AI Endpoints API key ğŸ”
ENV OVH_AI_ENDPOINTS_ACCESS_TOKEN=$OVH_AI_ENDPOINTS_ACCESS_TOKEN

# âš¡ï¸ Run chatbot.py when the container launches âš¡ï¸
CMD ["python", "chatbot.py"]